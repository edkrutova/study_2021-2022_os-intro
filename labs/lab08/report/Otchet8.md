---
## Front matter
title: "Лабораторная работа №8"
subtitle: " Текстовой редактор vi"
author: "Крутова Екатерина Дмитриевна"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы:

Познакомиться с операционной системой Linux. Получить практические навыки работы с редактором vi, установленным по умолчанию практически во всех дистрибутивах.

# Задание

1. Создание нового файла с использованием vi

    1. Создайте каталог с именем ~/work/os/lab06.

    2. Перейдите во вновь созданный каталог.

    3. Вызовите vi и создайте файл hello.sh

    4. Нажмите клавишу i и введите текст.

    5. Нажмите клавишу Esc для перехода в командный режим после завершения ввода текста.

    6. Нажмите : для перехода в режим последней строки и внизу вашего экрана появится приглашение в виде двоеточия.

    7. Нажмите w (записать) и q (выйти), а затем нажмите клавишу Enter для сохранения вашего текста и завершения работы.

    8. Сделайте файл исполняемым

2. Редактирование существующего файла

    1. Вызовите vi на редактирование файла

    2. Установите курсор в конец слова HELL второй строки.

    3. Перейдите в режим вставки и замените на HELLO. Нажмите Esc для возврата в командный режим.

    4. Установите курсор на четвертую строку и сотрите слово LOCAL.

    5. Перейдите в режим вставки и наберите следующий текст: local, нажмите Esc для
    возврата в командный режим.

    6. Установите курсор на последней строке файла. Вставьте после неё строку, содержащую
    следующий текст: echo $HELLO.

    7. Нажмите Esc для перехода в командный режим.

    8. Удалите последнюю строку.

    9. Введите команду отмены изменений u для отмены последней команды.

    10. Введите символ : для перехода в режим последней строки. Запишите произведённые
    изменения и выйдите из vi.

# Теоретическое введение

В большинстве дистрибутивов Linux в качестве текстового редактора по умолчанию
устанавливается интерактивный экранный редактор vi (Visual display editor).

Редактор vi имеет три режима работы:

– командный режим — предназначен для ввода команд редактирования и навигации по
редактируемому файлу;

– режим вставки — предназначен для ввода содержания редактируемого файла;

– режим последней (или командной) строки — используется для записи изменений в файл
и выхода из редактора.

Для вызова редактора vi необходимо указать команду vi и имя редактируемого файла:
vi <имя_файла>

При этом в случае отсутствия файла с указанным именем будет создан такой файл.

Переход в командный режим осуществляется нажатием клавиши Esc . Для выхода из
редактора vi необходимо перейти в режим последней строки: находясь в командном
режиме, нажать Shift-; (по сути символ : — двоеточие), затем:

– набрать символы wq, если перед выходом из редактора требуется записать изменения
в файл;

– набрать символ q (или q!), если требуется выйти из редактора без сохранения.

## Замечание. ##

Следует помнить, что vi различает прописные и строчные буквы при наборе
(восприятии) команд.

# Выполнение лабораторной работы

## Задание 1 (рис. [-@fig:001]-[-@fig:008])

![Создание каталога](pics8/1.jpg){ #fig:001 width=70% }

![Переход в каталог](pics8/2.jpg){ #fig:002 width=70% }

![Вызов vi и создание файла hello.sh](pics8/3.0.jpg){ #fig:003 width=70% }

![Созданный файл hello.sh](pics8/3.jpg){ #fig:004 width=70% }

![Введённый текст](pics8/4.jpg){ #fig:005 width=70% }

![Командный режим](pics8/5.jpg){ #fig:006 width=70% }

![Режим последней строки](pics8/6.jpg){ #fig:007 width=70% }

![Создание исполняемого файла](pics8/8.jpg){ #fig:008 width=70% }

## Задание 2 (рис. [-@fig:009]-[-@fig:017])

![Вызов vi на редактирование файла](pics8/9.0.jpg){ #fig:009 width=70% }

![Открытый файл](pics8/9.jpg){ #fig:010 width=70% }

![Изменение слова HELL второй строки](pics8/11.jpg){ #fig:011 width=70% }

![Удаление слова](pics8/10.jpg){ #fig:012 width=70% }

![Вставка строки, содержащую следующий текст: echo $HELLO](pics8/12.jpg){ #fig:013 width=70% }

![Командный режим](pics8/13.jpg){ #fig:014 width=70% }

![Удаление строки](pics8/14.jpg){ #fig:015 width=70% }

![Отмена последней команды](pics8/15.jpg){ #fig:016 width=70% }

![Сохранение и выход](pics8/16.jpg){ #fig:017 width=70% }

# Выводы

Я познакомилась с операционной системой Linux и получила практические навыки работы с редактором vi, установленным по умолчанию практически во всех дистрибутивах.

# Контрольные вопросы

1. Дайте краткую характеристику режимам работы редактора vi.

    - командный режим -- предназначен для ввода команд редактирования и навигации по редактируемому файлу

    - режим вставки -- предназначен для ввода содержания редактируемого файла

    - режим последней (или командной) строки -- используется для записи изменений в файл и выхода из редактора

2. Как выйти из редактора, не сохраняя произведённые изменения?

Введя команду `:q!` в командном режиме.

3. Назовите и дайте краткую характеристику командам позиционирования.

  - <kbd>0</kbd> -- переход в начало строки

  - <kbd>$</kbd> -- переход в конец строки

  - <kbd>G</kbd>-- переход в конец файла

4. Что для редактора vi является словом?

В зависимости от используемой команды редактор vi понимает слово по-разному. При использовании прописных <kbd>W</kbd> и <kbd>B</kbd> под разделителями понимаются только пробел, табуляция и возврат каретки. При использовании строчных <kbd>w</kbd> и <kbd>b</kbd> под разделителями понимаются также любые знаки пунктуации.

5. Каким образом из любого места редактируемого файла перейти в начало (конец) файла?

  - <kbd>g</kbd><kbd>g</kbd> -- переход в начало файла

  - <kbd>G</kbd> -- переход в конец файла

6. Назовите и дайте краткую характеристику основным группам команд редактирования.

    - Вставка текста текста позволяет вставить текст относительно курсора или строки (n раз)

    - Вставка строки позволяет вставить строку относительно курсора

    - Удаление текста позволяет удалять текст посимвольно, относительно курсора, относительно строки и номерам строк

    - Отмена и повтор произведенных изменений позволяет отменить и повторить произведенные изменения

    - Копирование текста позволяет скопировать строку, n строк или слово в буфер

    - Вставка текста позволяет вставить текст из буфера относительно курсора

    - Замена текста позволяет заменить текст или слова

    - Поиск текста позволяет произвести поиск текста внутри файла

7. Необходимо заполнить строку символами $. Каковы ваши действия?

Как один из вариантов реализации задания -- использовать команду `10A$`<kbd>Esc</kdb>, где `10` -- кол-во символов на замену в строке.

8. Как отменить некорректное действие, связанное с процессом редактирования?

Командой <kbd>u</kbd>.

9. Назовите и дайте характеристику основным группам команд режима последней строки.
    
    - Команды копирования и перемещения текста позволяют удалять, перемещать и копировать текст (строки), а также записывать их в отдельный файл

    - Команды записи файла и выхода из редактора позволяют записать измененный текст как с выходом из редактора, так и без, а также выйти из редактора без записи изменений.

10. Как определить, не перемещая курсора, позицию, в которой заканчивается строка?

Можно использовать команду <kbd>$</kbd>.

11. Выполните анализ опций редактора vi (сколько их, как узнать их назначение и т.д.).

В редакторе Vi существует огромное множество опций. Их назначение можно узнать используя команду `:help`, например `:help G`.

12. Как определить режим работы редактора vi?

Зачастую режим работы редактора указан в последней строке.

13. Постройте граф взаимосвязи режимов работы редактора vi

![Граф взаимосвязи режимов работы редактора Vi](pics8/img.png)